{"name":"Ads-b-empfang-dekodierung-mittels-raspberrypi","tagline":"Die Anleitung erklärt, wie man auf einem RaspberryPi mittels eines bestimmten USB DVB-T Sticks und den Software-Paketen rtl-sdr und dump1090 die ADS-B Daten von Flugzeugen zu empfangen und ggf. für andere Anwendungen dekodieren/auszuwerten.","body":"# Howto: Installation von Dump1090 auf einem RaspberryPi\r\n\r\n## Einleitung:\r\n\r\nDie Anleitung erklärt, wie man auf einem RaspberryPi mittels eines bestimmten USB DVB-T Sticks und den Software-Paketen rtl-sdr und dump1090 die ADS-B Daten von Flugzeugen zu empfangen und ggf. für andere Anwendungen dekodieren/auszuwerten. \r\n\r\n\r\n## Was wird benötigt?\r\n\r\n- RaspberryPi (Modell B mit 512MB Speicher) inklusive USB-Netzteil \r\n- SD-Karte (8GB oder mehr) \r\n- USB Tastatur und (optional) USB Maus\r\n- USB DVB-T Empfänger mit RTL2832U/E4000 oder (neuer) RTL2832U/R820T als Chipsatz/Tuner\r\n- Ein Windows/Mac/Linux-Rechner\r\n\r\n## Installations-Anleitung:\r\n\r\n\r\n### Basis-Installation des Raspberry Pi: \r\n\r\n#### Teil 1: Auf Ihrem Computer \r\n\r\n##### Windows/Mac:\r\n- SDCardFormatter (für [Windows](https://www.sdcard.org/downloads/formatter_4/eula_windows/\") bzw. [Mac](https://www.sdcard.org/downloads/formatter_4/eula_mac/)) und [NOOBS Distribution](http://www.raspberrypi.org/downloads/) herunterladen\r\n- SDCard mit SDCardFormatter formatieren. ``` Wichtig: Die Option „Format Size Adjustment“ aktivieren. ``` \r\n- NOOBS Distribution entpacken und auf SDCard kopieren\r\n\r\n##### oder Linux:\r\n- Partition auf SDCard anlegen und formatieren mittels *mkfs.vfat*. \r\n- NOOBS Distribution entpacken und auf SDCard kopieren\r\n\r\nEine Schritt-für-Schritt Anleitung (englisch) finden Sie [hier](http://qdosmsq.dunbar-it.co.uk/blog/2013/06/noobs-for-raspberry-pi/)\r\n\r\n\r\n#### Teil 2: Auf Ihrem RaspberryPi:\r\n- SD-Karte in den RaspberryPi stecken\r\n- RaspberryPi mit der Tastautur, einem Monitor und dem Netzteil in Betrieb nehmen.\r\n- Im Installer auf Sprache „Deutsch“ stellen und „Raspbian“ + „Data Partiton“ auswählen\r\n- Auswahl installieren (~2GB werden heruntergeladen)\r\n- Einen Kaffee oder Tee holen, denn der Vorgang kann abhängig vom Internetzugang lange dauern\r\n- Nach Abschluss RaspberryPi neu starten\r\n\r\n### Teil 3: NOOBS installieren\r\n\r\n##### Betriebsystem-Auswahl (Pre-Installation):\r\n\r\n- Nach dem initialen Bootvorgang wird der _easy operating system install manager_ gestartet.\r\n- Im Install-Manager wählen Sie als Betriebssystem „Raspbian [RECOMMENDED]“ aus\r\n- Zusätzlich wählen Sie bei „Language“ und „Keyboard“ jeweils die Einstellungen für Deutschland aus.\r\n- (Optional) Über „Edit config“ kann noch die config.txt Konfigurationsdatei des RaspberryPi angepasst werden\r\n- Danach gehen Sie auf \"Install\" um das gewählte Betriebssystem zu installieren\r\n- Am Abschluss der Installation wird der RaspberryPi neu gestartet\r\n\r\n##### Konfiguration von Raspbian (Post-Installation):\r\n\r\n- Nach dem ersten Bootvorgang des Systems Raspbian wird automatisch Raspi-config gestartet (Hinweis: Der Startvorgang kann beim ersten mal etwas länger dauern)\r\n- In Raspi-config folgendes einstellen:\r\n\t- Mit „2 Change User Password“ ein Passwort setzen\r\n\t- Bei „4 Internationalisation Options“ / „I2 Change Timezone“ die eigene Zeitzone einstellen (z.B. Europa / Berlin)\r\n\t- (Empfohlen) Den SSH Server über „8 Advanced Options“ / „A4 SSH“ einschalten\r\n\t- (Optional) „7 Overclock“ den RaspberryPi etwas schneller machen. Bitte die Risiken beachten ([Details](http://elinux.org/RPiconfig#Overclocking))\r\n- Mit „Finish“ das Programm verlassen (Reboot)\r\n\t\r\n### Teil 4: Benötigte zusätzliche Pakete installieren\r\n\r\n- Auf dem RaspberryPi anmelden mittels Benutzernamen _pi_ und Ihrem gewählten Passwort an\r\n- Um die nachfolgenden Programme installieren zu können, werden zusätzliche Pakete auf dem Raspberry-Pi benötigt (Crosscompiler und libusb Entwickler-Dateien). Zusätzlich wird das nicht benötigte Mathematica inklusive deren Konfigurationsdateien entfernt um ein nicht benötigten Dienst zu beenden und Speicherplatz zu sparen.\r\n\r\n\t```\r\n\tsudo aptitude install cmake libusb-1.0-0-dev\r\n\tsudo aptitude purge wolfram-engine\r\n\t```\r\n\r\n### Teil 5: Installation von rtl-sdr\r\n\r\n- Git Repository für  rtl-sdr von OsmoSDR (<http://sdr.osmocom.org/trac/wiki/rtl-sdr>) herunterladen\r\n\r\n\t```\r\n\tgit clone git://git.osmocom.org/rtl-sdr.git\r\n\t```\r\n\t\r\n- In Sourcecode-Verzeichnis wechseln und Anwendung kompilieren\r\n\r\n\t```\r\n\tcd rtl-sdr/\r\n\tmkdir build; cd build\r\n\tcmake ../ -DINSTALL_UDEV_RULES=ON\r\n\tmake\r\n\tsudo make install\r\n\t```\r\n\t\r\n- Hier ist eventuell Zeit für z.B. dem aufräumen des Schreibtisch ;-)\r\n\r\n- Update den Cache der Shared Libraries\r\n\r\n\t```\r\n\tsudo ldconfig\r\n\t```\r\n\t\r\n- rtl-sdr udev-Rules kopieren\r\n\r\n\t```\r\n\tsudo cp ../rtl-sdr.rules /etc/udev/rules.d/\r\n\t```\r\n\r\n- Bestehende DVB-T Kernel Module blacklisten (hierzu no-rtl.conf anlegen)\r\n\r\n\t```\r\n\tsudo nano /etc/modprobe.d/no-rtl.conf\r\n\t```\r\n\t\r\n\tund mit folgendem Inhalt versehen:\r\n\t\r\n\t```\r\n\tblacklist dvb_usb_rtl28xxu\r\n\tblacklist rtl2832\r\n\tblacklist rtl2830\t\r\n\t```\r\n\t\r\n- System neu starten\r\n\r\n\t```\r\n\tsudo reboot\r\n\t```\r\n\t\r\n- Optional: prüfe ob der DVB-T Stick erkannt wird\r\n\r\n\t```\r\n\trtl_test -t\r\n\t```\r\n\t\r\n\tEs sollte eine Ausgabe wie folgt kommen:\r\n\t\t\t\t\r\n\t>\tFound 1 device(s):\r\n\t>\t0:  Generic RTL2832U OEM\r\n\t>\r\n\t> Using device 0: Generic RTL2832U OEM\r\n\t> Found Rafael Micro R820T tuner\r\n\t\r\n\tFalls nachfolgende Text erscheint, dann muss das erwähnte Kernel-Modul ebenfalls in die oben angelegte Blacklist aufgenommen und später mittels rmmod oder Reboot entladen werden.\r\n\t\r\n\t> Kernel driver is active, or device is claimed by second instance of librtlsdr.\r\n\t> In the first case, please either detach or blacklist the kernel module\r\n\t> (dvb_usb_rtl28xxu), or enable automatic detaching at compile time.\t\r\n\t\r\n\tSollte die folgende Meldung _No E4000 tuner found, aborting._ bekommen, so stellt das **kein Problem** \r\n\r\n### Teil 6: Installation von dump1090\r\n\r\n-\tDump1090 (<https://github.com/MalcolmRobb/dump1090>) herunterladen\r\n\r\n\t```\r\n\tcd ~\r\n\tgit clone git://github.com/MalcolmRobb/dump1090.git\r\n\t```\r\n\t\r\n-\tDump1090 kompilieren:\r\n\r\n\t```\r\n\tcd dump1090\r\n\tmake\t\r\n\t```\r\n\t\r\n\r\n- Voilá - Installation ist schon fast fertig und wir können prüfen ob Daten empfangen werden\r\n\r\n\t```\r\n\t./dump1090 --interactive --net --metric --enable-agc\r\n\t``` \r\n\r\n\tEs sollte dabei eine Ausgabe wie die folgende nach einigen Sekunden zu sehen sein:\r\n\t\r\n\t![linuxkonsole.png](https://github.com/CsiLabor/ADS-B-Empfang-Dekodierung-mittels-RaspberryPi/blob/master/linuxkonsole.png?raw=true)\r\n\t\r\n### Schritt 5: Zuletzt das Init-Script für automatischen Start einrichten\r\n\r\n- Das mitgelieferte das Init-Script in den init.d Ordner kopieren\r\n\t```\r\n\tcp dump1090.sh /etc/init.d\r\n\t```\r\n\r\n-  Das Init-Script öffnen um die Startparameter anzupassen:\r\n\r\n\t```\r\n\tsudo nano /etc/init.d/dump1090.sh\r\n\t```\r\n\t\r\n- Die Zeile mit *PROG_ARGS=\"...\"* suchen und durch folgende Zeile ersetzen:\r\n\t\r\n\t```\r\n\tPROG_ARGS=\"--quiet --net --net-ro-size 500 --net-ro-rate 5 --aggressive --enable-agc\"\r\n\t```\t\r\n\r\n\tDie gewählten Parameter wurden erweitert um Auto-Gain und dem optionalen Aggressive-Mode (siehe Hinweise).\r\n\t\r\n- Kontrollieren Sie auch, ob der unter *PROG_PATH* gewählte Pfad korrekt ist (sollte */home/pi/dump1090* sein).\r\n\r\n-\tDas Start-Script nun noch ausführbar machen und die Runlevel-Links erzeugen\r\n\t```\r\n\tsudo chmod +x /etc/init.d/dump1090.sh\r\n\tsudo update-rc.d dump1090.sh defaults\r\n\t```\r\n\r\n### Abschluss:\r\n\r\nWelche Möglichkeiten habe ich nach dieser Installation? Ohne die Installation weiterer Anwendungen können Sie sich im Browser auf einer Google Maps bzw. OpenStreetMap-Karte die empfangenen Flugdaten [anzeigen lassen](https://github.com/CsiLabor/ADS-B-Empfang-Dekodierung-mittels-RaspberryPi/blob/master/browserscreenshot.png?raw=true). Hierzu rufen Sie im Browser die URL _http://ip_vom_raspberry:8080/_ auf. \r\n\r\nSelbstverständlich besteht auch die Möglichkeit die Flugdaten mittels alternative Programme wie [Virtual Radar](http://www.virtualradarserver.co.uk) (für Windows/Linux) auszuwerten. Hierzu wird z.B. der von dump1090 bereitgestellte _Beast Raw Feed_ über den Port 30002 verwendet. Die Möglichkeiten sind hierbei beinahe unendlich.\r\n\r\n---\r\n\r\n### Noch ein paar Hinweise\r\n\r\n1. Sollten Sie die dump1090 im Hintergrund starten möchten, so können Sie die Software wie folgt aufrufen:\r\n\r\n\t```\r\n\t./dump1090 --quiet --net --enable-agc &\r\n\t```\r\n \r\n2. Falls der RaspberryPi überlastet sein sollte (z.B. beim Empfang vieler Flugzeuge z.B. mittels einer etwas besseren Antenne), dann kann die Systemlast durch folgenden Programmaufruf reduziert werden. Sollten Sie Ihren RaspberryPi nicht übertaktet haben, kann dies ebenfalls Sinn ergeben:\r\n\r\n\t```\r\n\t./dump1090 --quiet --net --enable-agc --net-ro-size 500 --net-ro-rate 5 &\r\n\t```\r\n\t\r\n3. Mittels des Parameters _--aggressive_ kann versucht werden die Flugdaten mittels einer alternativen Methode dekodiert werden. Dies *kann* zum empfangen von mehr Flugdaten führen. Dies wird unter anderem mehr einer höheren Fehlerrate \"erkauft\". Der Einsatz empfiehlt sich laut Entwickler an Orten, bei denen wenig Flugverkehr stattfindet. Es erhöht sich dabei die Chance mehr Daten von den Flugzeugen zu empfangen. Weitere Details finden sich auf der Homepage von Dump1090 unter <https://github.com/MalcolmRobb/dump1090>.\r\n\r\n\tNach meiner Erfahrung empfiehlt sich der Einsatz des Parameters auch, wenn man z.B. die beim USB-Stick mitgelieferte Antenne einsetzen möchte. \r\n\t\r\n--\r\n\r\n###### Lizenz-Information:\r\n\r\nCopyright Jens Dutzi 2014 / Stand: 14.06.2014\r\n\r\n![Lizenz](http://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png).\r\n\r\nDieses Werk ist lizenziert unter einer [Creative Commons Namensnennung - Nicht-kommerziell - Weitergabe unter gleichen Bedingungen 4.0 International Lizenz.](http://creativecommons.org/licenses/by-nc-sa/4.0/)\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}